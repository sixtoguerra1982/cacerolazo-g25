 <h5>Olla Comun</h5>

<div class="container">

	<div class="input-field col s12">
		<select id="region" name="region" onchange="ShowSelectedRegion();">
			<option value="" disabled selected></option>
		  <% @regiones.each do |r| %>
			    <option value="<%= r.id %>"><%= r.nombre %></option>
		  <% end %>
		</select>
		<label>Seleccione Region</label>
	  </div>

	 <div class="input-field col s12">
		<select id="comuna" name="comuna">
		  <option value="" disabled selected></option>
		  <% @regiones.each do |r| %>
		  	<optgroup label="<%= r.nombre %>">
		  		<% r.comunas.each do |c| %>
			    	<option value="<%= c.codigo %>"><%= c.nombre %></option>
			    <% end %>
		  	</optgroup>
		  <% end %>
		</select>
		<label>Seleccione Comuna</label>
	  </div>
</div>

<section>
	<div class="row">
		<% 12.times do %>
	    <div class="col s6">
	      <div class="card">
	        <div class="card-image">
	          <%= image_tag 'default-image.jpg' %>
	          <span class="card-title">Card Title</span>
	          <a class="btn-floating halfway-fab waves-effect waves-light red"><i class="material-icons">add</i></a>
	        </div>
	        <div class="card-content">
	          <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
	        </div>
	      </div>
    	</div>
	  <% end %>
  </div>
</section>

 <script>
 	$(document).ready(function(){
     $('select').formSelect();
  	});

 	function ShowSelectedRegion(){
		var region = parseInt(document.getElementById("region").value);
	 	$.ajax({
	      type: 'GET',
	      url: "<%= home_change_region_path %>",
	      dataType: "script",
	      data: {region_id: region}
	    });
 	}
 </script>
